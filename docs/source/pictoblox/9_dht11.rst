.. _sh_humiture:

2.9 Lecture de la Température et de l'Humidité
=================================================

Dans les projets précédents, nous avons utilisé le mode scène, mais certaines fonctions ne sont disponibles qu'en mode de téléversement, comme la fonction de communication série. 
Dans ce projet, nous imprimerons la température et l'humidité du DHT11 en utilisant le Moniteur Série dans le :ref:`upload_mode`.

.. image:: img/11_serial.png

Vous Apprendrez
---------------------

- Obtenir la température et l'humidité du module DHT11
- Moniteur Série pour le :ref:`upload_mode`
- Ajouter une extension

Composants requis
---------------------

Pour ce projet, nous aurons besoin des composants suivants.

Il est certainement pratique d'acheter un kit complet, voici le lien :

.. list-table::
    :widths: 20 20 20
    :header-rows: 1

    *   - Nom	
        - ÉLÉMENTS DE CE KIT
        - LIEN
    *   - 3 in 1 Starter Kit
        - 380+
        - |link_3IN1_kit|

Vous pouvez également les acheter séparément via les liens ci-dessous.

.. list-table::
    :widths: 30 20
    :header-rows: 1

    *   - INTRODUCTION DES COMPOSANTS
        - LIEN D'ACHAT

    *   - :ref:`cpn_uno`
        - |link_Uno_R3_buy|
    *   - :ref:`cpn_breadboard`
        - |link_breadboard_buy|
    *   - :ref:`cpn_wires`
        - |link_wires_buy|
    *   - :ref:`cpn_dht11`
        - \-

Construisez le Circuit
-----------------------

Le capteur numérique de température et d'humidité DHT11 est un capteur composite qui contient une sortie de signal numérique calibrée de température et d'humidité.

Construisez maintenant le circuit selon le schéma suivant.

.. image:: img/circuit/dht11_circuit.png

Programmation
------------------

**1. Ajout d'Extensions**

Passez en mode **Upload**, cliquez sur le bouton **Add Extension** dans le coin inférieur gauche, puis sélectionnez **Communication** pour l'ajouter, et elle apparaîtra à la fin de la zone de palette.

.. image:: img/11_addcom.png

**2. Initialisation de l'Arduino Uno et du Moniteur Série**

En mode **Upload**, démarrez Arduino Uno puis réglez le débit en bauds du port série.

* [when Arduino Starts up] : En mode **Upload**, démarrez Arduino Uno.
* [set serial baud rate to] : De la palette **Communications**, utilisé pour régler le débit en bauds du port série 0, par défaut 115200. Si vous utilisez Mega2560, vous pouvez choisir de régler le débit en bauds des ports série 0 à 3.

.. image:: img/11_init.png

**3. Lire la température et l'humidité**

Créez 2 variables **tem** et **humi** pour stocker respectivement la température et l'humidité, le code apparaîtra sur le côté droit lorsque vous glissez et déposez le bloc.

.. image:: img/11_readtem.png

**4. Les imprimer sur le Moniteur Série**

Écrivez la température et l'humidité lues sur le Moniteur Série. Pour éviter un transfert trop rapide causant un blocage de PictoBlox, utilisez le bloc [wait seconds] pour ajouter un intervalle de temps pour la prochaine impression.

.. image:: img/11_writeserial.png

**5. Téléversement du code**

Contrairement au mode **Stage**, le code en mode **Upload** doit être téléversé sur la carte Arduino en utilisant le bouton **Upload Code** pour voir l'effet. Cela vous permet également de débrancher le câble USB tout en conservant le programme en cours d'exécution.

.. image:: img/11_upload.png

**6. Ouvrir le moniteur série**

Ouvrez maintenant le **Serial Monitor** pour voir la température et l'humidité.

.. image:: img/11_serial.png

